{% extends "base.html" %}
{% block title %}{{ meta.name }} Vocabulary ‚Äî Language Coach{% endblock %}
{% block body_class %}lang-{{ lang }}-page vocab-page{% endblock %}

{% block content %}
<div class="lang-header lang-header-{{ lang }} py-4">
  <div class="container">
    <div class="d-flex align-items-center justify-content-between flex-wrap gap-3">
      <div>
        <h1 class="text-white fw-bold mb-0">
          <i class="fas fa-book me-2"></i> Vocabulary
        </h1>
        <p class="text-white opacity-75 mb-0">
          {{ meta.flag }} {{ meta.name }} ‚Ä¢ {{ categories|length }} categories
        </p>
      </div>
      <div class="d-flex gap-2 flex-wrap">
        <a href="{{ url_for('review_flashcards', lang=lang) }}" class="btn btn-outline-light">
          <i class="fas fa-repeat me-1"></i> Review
        </a>
        <a href="{{ url_for('language_home', lang=lang) }}" class="btn btn-light">
          <i class="fas fa-list me-1"></i> Lessons
        </a>
      </div>
    </div>
  </div>
</div>

<div class="container py-4">
  <div class="card border-0 shadow-sm mb-4">
    <div class="card-body p-3 p-md-4">
      <div class="row g-3 align-items-end">
        <div class="col-md-5">
          <label class="form-label small text-muted mb-1">Search</label>
          <input id="vocabSearch" type="search" class="form-control"
                 placeholder="Type a word in French/Spanish, English, or ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‚Ä¶">
        </div>
        <div class="col-md-4">
          <label class="form-label small text-muted mb-1">Category</label>
          <select id="vocabCategory" class="form-select">
            <option value="all" {% if selected_cat == 'all' %}selected{% endif %}>All categories</option>
            {% for c in categories %}
            <option value="{{ c.id }}" {% if selected_cat == c.id %}selected{% endif %}>
              {{ c.label }} ({{ c.count }})
            </option>
            {% endfor %}
          </select>
        </div>
        <div class="col-md-3 d-grid">
          <a id="practiceLink"
             class="btn btn-{{ 'french' if lang == 'french' else 'spanish' }} {% if selected_cat == 'all' %}disabled{% endif %}"
             {% if selected_cat == 'all' %}aria-disabled="true"{% endif %}
             href="{% if selected_cat != 'all' %}{{ url_for('flashcards_category', lang=lang, category=selected_cat) }}{% else %}#{% endif %}">
            üÉè Practice Flashcards
          </a>
          <small class="text-muted mt-1" id="vocabCount"></small>
        </div>
      </div>
    </div>
  </div>

  <div class="row g-3" id="vocabList"></div>

  <div class="text-center mt-4" id="vocabShowAllWrap" style="display:none">
    <button class="btn btn-outline-secondary" id="vocabShowAllBtn">Show all results</button>
  </div>

  <div class="text-center text-muted py-5" id="vocabEmpty" style="display:none">
    <div class="fs-1">üîé</div>
    <h4 class="mt-2">No matches</h4>
    <p class="mb-0">Try a different search term or category.</p>
  </div>
</div>

<script>
const VOCAB_ALL = {{ vocab_json | safe }};
const LANG = '{{ lang }}';
const DEFAULT_CAT = '{{ selected_cat }}';
const PRACTICE_URL_TEMPLATE = "{{ url_for('flashcards_category', lang=lang, category='__CAT__') }}";
</script>
{% endblock %}
